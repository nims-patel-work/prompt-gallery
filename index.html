<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Prompt Gallery — Gemini</title>
  <style>
    :root{--bg:#f8fafc;--card:#ffffff;--accent:#06b6d4}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Arial;color:#0b2540;background:var(--bg)}
    .wrap{max-width:1100px;margin:28px auto;padding:18px}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
    h1{margin:0;font-size:22px}
    .controls{display:flex;gap:8px;align-items:center}
    input.search{padding:8px 10px;border-radius:10px;border:1px solid #e6eef6;min-width:220px}
    button.btn{background:var(--accent);border:none;padding:8px 12px;border-radius:10px;color:#022;cursor:pointer;font-weight:600}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:14px;margin-top:18px}
    .card{background:var(--card);border-radius:10px;box-shadow:0 6px 18px rgba(2,6,23,0.06);padding:12px;display:flex;flex-direction:column;gap:8px}
    .thumb{width:100%;height:160px;object-fit:cover;border-radius:8px;background:#f1f5f9}
    .title{font-weight:700;font-size:14px}
    .prompt{font-size:13px;color:#334155;min-height:56px;white-space:pre-wrap;overflow:hidden}
    .copyBtn{background:var(--accent);border:none;padding:8px 10px;border-radius:8px;color:white;cursor:pointer;font-size:13px;font-weight:600}
    footer{margin-top:20px;color:#64748b;font-size:13px}
    @media(max-width:720px){.grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Prompt Gallery — Gemini</h1>
      <div class="controls">
        <input id="search" class="search" placeholder="Search prompts..." />
        <button id="copyAll" class="btn">Copy all prompts</button>
      </div>
    </header>

    <div id="grid" class="grid" aria-live="polite"></div>

    <footer>
      Tip: To update content, add a <code>prompts.json</code> in the repo root.
    </footer>
  </div>

  <script>
    const PROMPTS_JSON_URL = 'prompts.json'; 

    const sampleData = [
      {
        "id": "p1",
        "title": "Sunlit Portrait",
        "prompt": "4k HD realistic portrait of an Indian man, golden hour lighting, cinematic, sharp details, soft bokeh",
        "image": "images/example1.jpg"
      },
      {
        "id": "p2",
        "title": "Red Saree",
        "prompt": "4k HD portrait of an Indian woman in a red saree, warm tones, soft light, traditional jewelry",
        "image": "images/example2.jpg"
      }
    ];

    const grid = document.getElementById('grid');
    const search = document.getElementById('search');
    const copyAllBtn = document.getElementById('copyAll');
    let DATA = [];

    async function loadData(){
      try{
        const r = await fetch(PROMPTS_JSON_URL, {cache:'no-store'});
        if(!r.ok) throw new Error('no prompts.json');
        const j = await r.json();
        if(!Array.isArray(j)) throw new Error('not array');
        DATA = j;
      }catch(err){
        DATA = sampleData.slice();
      }
      render(DATA);
    }

    function render(items){
      grid.innerHTML = '';
      if(!items.length){ grid.innerHTML = '<div style="color:#64748b">No prompts found.</div>'; return; }
      items.forEach(it => {
        const card = document.createElement('div'); card.className = 'card';
        const img = document.createElement('img'); img.className = 'thumb'; img.alt = it.title; img.src = it.image;
        img.onerror = ()=>{ img.src='https://via.placeholder.com/600x400?text=No+Image' };
        const title = document.createElement('div'); title.className='title'; title.textContent = it.title;
        const prompt = document.createElement('div'); prompt.className='prompt'; prompt.textContent = it.prompt;
        const copyBtn = document.createElement('button'); copyBtn.className='copyBtn'; copyBtn.textContent='Copy';
        copyBtn.addEventListener('click', ()=> {
          navigator.clipboard.writeText(it.prompt).then(()=> {
            copyBtn.textContent='Copied ✓';
            setTimeout(()=> copyBtn.textContent='Copy', 1000);
          });
        });
        card.appendChild(img);
        card.appendChild(title);
        card.appendChild(prompt);
        card.appendChild(copyBtn);
        grid.appendChild(card);
      });
    }

    function filtered(){
      const q = search.value.trim().toLowerCase();
      if(!q) return DATA;
      return DATA.filter(it => ((it.prompt||'') + ' ' + (it.title||'')).toLowerCase().includes(q));
    }

    search.addEventListener('input', ()=> render(filtered()));

    copyAllBtn.addEventListener('click', ()=>{
      const all = DATA.map(d=>d.prompt).join('\n\n---\n\n');
      navigator.clipboard.writeText(all).then(()=> {
        copyAllBtn.textContent = 'All copied ✓';
        setTimeout(()=> copyAllBtn.textContent='Copy all prompts',1200);
      });
    });

    loadData();
  </script>
</body>
</html>
