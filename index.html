<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Prompt Gallery — Gemini with Full Image</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#f7fbfd;
    --card:#ffffff;
    --muted:#6b7280;
    --accent:#06b6d4;
    --accent-dark:#089aa9;
    --radius:12px;
    --gap:12px;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:"Inter",system-ui,Arial;background:linear-gradient(180deg,#fbfdfe,#f0f6f9);color:#0f172a}
  .wrap{max-width:1200px;margin:18px auto;padding:12px}

  h1{margin:0;font-size:20px;font-weight:700;padding:4px 0}

  /* GRID: desktop many columns, but FORCE 2 columns on narrow screens */
  .grid{
    display:grid;
    gap:var(--gap);
    margin-top:12px;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  }

  /* desktop large */
  @media (min-width:1200px){
    .grid{ grid-template-columns: repeat(4, 1fr); }
  }
  @media (min-width:900px) and (max-width:1199px){
    .grid{ grid-template-columns: repeat(3, 1fr); }
  }
  @media (min-width:600px) and (max-width:899px){
    .grid{ grid-template-columns: repeat(2, 1fr); }
  }

  /* < 600px (mobile): force 2 columns */
  @media (max-width:599px){
    .grid{
      grid-template-columns: repeat(2, 1fr);
      gap:10px;
    }
    .wrap{padding:10px}
  }

  .card{background:var(--card);border-radius:var(--radius);padding:10px;display:flex;flex-direction:column;gap:8px;
    box-shadow:0 10px 26px rgba(11,22,38,0.05);position:relative;min-height:220px;overflow:hidden}
  .imgwrap{position:relative;width:100%;height:140px;border-radius:8px;overflow:hidden}
  .thumb{width:100%;height:100%;object-fit:cover;object-position:bottom right;display:block}

  /* expand icon */
  .expandBtn{
    position:absolute;bottom:8px;right:8px;background:rgba(0,0,0,0.6);border:none;color:#fff;
    width:30px;height:30px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:14px;
  }
  .expandBtn:hover{background:rgba(0,0,0,0.75)}

  .title{font-weight:700;font-size:14px}
  .prompt{
    font-size:13px;color:var(--muted);line-height:1.3;overflow:hidden;
    display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;
  }

  .actions{margin-top:6px}
  .copyBtn{
    padding:6px 10px;border-radius:8px;border:none;background:linear-gradient(180deg,var(--accent),var(--accent-dark));
    color:#fff;font-weight:600;cursor:pointer;width:100%;
  }
  .copyBtn.copied{background:linear-gradient(180deg,#10b981,#059669)}

  /* modal */
  .modal{position:fixed;inset:0;background:rgba(0,0,0,0.7);display:none;align-items:center;justify-content:center;z-index:1000}
  .modal.show{display:flex}
  .modal-content{background:#000;padding:8px;border-radius:8px;max-width:95%;max-height:90%;display:flex;flex-direction:column;align-items:center}
  .modal-content img{max-width:100%;max-height:80vh;object-fit:contain;border-radius:6px}
  .closeModal{display:block;margin:8px auto 0;background:#fff;border:none;padding:6px 12px;border-radius:6px;cursor:pointer;font-weight:600}

  /* small tweaks for very small phones */
  @media (max-width:420px){
    .imgwrap{height:120px}
    .card{min-height:200px;padding:8px}
    .title{font-size:13px}
    .prompt{font-size:12px}
    .expandBtn{width:28px;height:28px;font-size:13px}
  }
</style>
</head>
<body>
  <div class="wrap">
    <h1>Prompt Gallery — Gemini</h1>
    <div id="grid" class="grid" aria-live="polite"></div>
  </div>

  <!-- modal -->
  <div id="modal" class="modal" role="dialog" aria-hidden="true">
    <div class="modal-content">
      <img id="modalImg" src="" alt="Full view">
      <button id="closeModal" class="closeModal">Close</button>
    </div>
  </div>

<script>
const PROMPTS_JSON_URL = 'prompts.json';
const grid = document.getElementById('grid');
const modal = document.getElementById('modal');
const modalImg = document.getElementById('modalImg');
const closeModal = document.getElementById('closeModal');

let DATA = [];

function el(tag, cls){ const e = document.createElement(tag); if(cls) e.className = cls; return e; }
function flash(btn){ btn.classList.add('copied'); btn.textContent = 'Copied ✓'; setTimeout(()=>{ btn.classList.remove('copied'); btn.textContent = 'Copy' }, 1000); }

/* render cards */
function render(items){
  grid.innerHTML = '';
  if(!items || !items.length){ const m = el('div'); m.style.color = '#6b7280'; m.textContent = 'No prompts found.'; grid.appendChild(m); return; }

  items.forEach(it=>{
    const card = el('div','card');

    const iw = el('div','imgwrap');
    const img = el('img','thumb'); img.src = it.image || ''; img.alt = it.title || 'image';
    img.onerror = ()=>{ img.src = 'https://via.placeholder.com/800x600?text=No+Image' };

    const expand = el('button','expandBtn'); expand.innerHTML = '🔍';
    expand.addEventListener('click', e => { e.stopPropagation(); openModal(it.image); });

    iw.appendChild(img);
    iw.appendChild(expand);

    const title = el('div','title'); title.textContent = it.title || 'Untitled';
    const prompt = el('div','prompt'); prompt.textContent = it.prompt || '';

    const actions = el('div','actions');
    const copyBtn = el('button','copyBtn'); copyBtn.textContent = 'Copy';
    copyBtn.addEventListener('click', async (e) => {
      e.stopPropagation();
      try{ await navigator.clipboard.writeText(it.prompt || ''); flash(copyBtn); } catch(err){ console.error('copy failed', err); }
    });

    actions.appendChild(copyBtn);

    card.appendChild(iw);
    card.appendChild(title);
    card.appendChild(prompt);
    card.appendChild(actions);

    grid.appendChild(card);
  });
}

/* modal */
function openModal(src){ modalImg.src = src || ''; modal.classList.add('show'); modal.setAttribute('aria-hidden','false'); }
closeModal.addEventListener('click', ()=> { modal.classList.remove('show'); modal.setAttribute('aria-hidden','true'); });
modal.addEventListener('click', (e) => { if(e.target === modal) { modal.classList.remove('show'); modal.setAttribute('aria-hidden','true'); } });

/* load prompts.json */
async function loadData(){
  try{
    const res = await fetch(PROMPTS_JSON_URL, {cache:'no-store'});
    if(!res.ok) throw new Error('no remote JSON');
    const txt = await res.text();
    const j = JSON.parse(txt);
    if(!Array.isArray(j)) throw new Error('remote JSON not array');
    DATA = j;
  }catch(err){
    console.warn('Using fallback sample data —', err.message);
    DATA = [
      { id:'p1', title:'Black Saree Portrait', prompt:"Turn this photo into a retro, vintage-inspired image...", image:'images/1.jpeg' },
      { id:'p2', title:'Red Saree Portrait', prompt:"Turn this photo into a retro, vintage-inspired image...", image:'images/2.jpeg' },
      { id:'p3', title:'Lavender Saree Portrait', prompt:"Create a retro, vintage-inspired image...", image:'images/3.jpeg' }
    ];
  }
  render(DATA);
}

/* init */
loadData();
</script>
</body>
</html>
